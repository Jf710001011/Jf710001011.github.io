<!DOCTYPE HTML>
<html lang="en">




<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Static-Program-Analysis, Hunter|Hacker|Coder|Artist">
    <meta name="description" content="信念与认知">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>


    <title>Static-Program-Analysis | Jf71o0x1o1l</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Jf71o0x1o1l" type="application/atom+xml">
</head>


    

                <body>
                    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Jf71o0x1o1l</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Jf71o0x1o1l</div>
        <div class="logo-desc">
            
            信念与认知
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

                        



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/20.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Static-Program-Analysis</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Static-Analysis/">
                                <span class="chip bg-color">Static-Analysis</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Academic/" class="post-category">
                                Academic
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2023-12-09
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2023-08-26
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    9.1k
                </div>
                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="resource">Resource</h3>
<ul>
<li><a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis">List
of tools for static code analysis</a></li>
</ul>
<h3 id="写在前面">写在前面</h3>
<ul>
<li>命令式语言</li>
<li>学术门槛高</li>
<li>形式化语言验证</li>
</ul>
<h3 id="南京大学软件分析开始">南京大学《软件分析》开始</h3>
<h3 id="introduction">01（Introduction）</h3>
<ul>
<li><p>程序语言和静态分析<img
src="https://3744927830-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MJC1RRYQ991XoNX219t%2Fuploads%2Fgit-blob-88cbf646c680c5289c2863bcecd60f502e53c7a5%2FPL.png?alt=media"
alt="img" /></p></li>
<li><p>sound 和 complete</p></li>
<li><p>确保soundness的情况下，权衡<strong>精确度</strong>和<strong>速度</strong></p></li>
<li><p>静态分析的要点</p>
<ol type="1">
<li>Abstract</li>
<li>Over-approximate</li>
</ol></li>
</ul>
<h3 id="中间表示2023-06-24">02 中间表示（2023-06-24）</h3>
<h4 id="写在前面-1">写在前面</h4>
<ul>
<li>编译器将源代码（Source code） 转换为机器代码（Machine
Code）。其中的流程框架是：
<ol type="1">
<li>词法分析器（Scanner），结合正则表达式，通过词法分析（Lexical
Analysis）将 source code 翻译为 token。</li>
<li>语法分析器（Parser），结合上下文无关文法（Context-Free
Grammar），通过语法分析（Syntax Analysis），将 token
解析为抽象语法树（Abstract Syntax Tree, AST）。</li>
<li>语义分析器（Type Checker），结合属性文法（Attribute
Grammar），通过语义分析（Semantic Analysis），将 AST 解析为 decorated
AST。</li>
<li>Translator，将 decorated AST
翻译为生成三地址码这样的中间表示形式（Intermediate Representation,
IR），并<strong>基于 IR
做静态分析</strong>（例如代码优化这样的工作）。</li>
<li>Code Generator，将 IR 转换为机器代码。</li>
</ol></li>
<li>IR设计的初衷，自由设计</li>
<li>LLVM 中间表示</li>
</ul>
<h4 id="compilers-and-static-analyzers">Compilers and Static
Analyzers</h4>
<ul>
<li><p><strong>上下文无关文法</strong>（Context-Free
Grammar，CFG）是一种形式语言的描述方法，用于描述生成或识别上下文无关语言的语法规则。它是计算机科学中的一个重要概念，广泛应用于编程语言设计、自然语言处理、编译器设计等领域。</p>
<p>上下文无关文法由<strong>四个部分</strong>组成：</p>
<ol type="1">
<li>终结符（Terminals）：文法中的基本符号，表示不可再分的语言单元，如字母、数字等。</li>
<li>非终结符（Non-terminals）：文法中的符号，表示可以分解为其他符号序列的语言单元。</li>
<li>产生式规则（Production
Rules）：定义了非终结符如何被替换为终结符和/或非终结符的规则。每个产生式规则通常由一个非终结符作为左侧，箭头
"-&gt;" 表示替换关系，右侧是由终结符和/或非终结符组成的序列。</li>
<li>起始符号（Start
Symbol）：表示语法推导开始的符号，通常是一个非终结符。</li>
</ol>
<p>上下文无关文法的一个例子如下：</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>S <span class="op">-&gt;</span> NP VP</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>NP <span class="op">-&gt;</span> Det N</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>VP <span class="op">-&gt;</span> V NP</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Det <span class="op">-&gt;</span> <span class="st">&quot;the&quot;</span> <span class="op">|</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>N <span class="op">-&gt;</span> <span class="st">&quot;cat&quot;</span> <span class="op">|</span> <span class="st">&quot;dog&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>V <span class="op">-&gt;</span> <span class="st">&quot;chased&quot;</span> <span class="op">|</span> <span class="st">&quot;ate&quot;</span></span></code></pre></div>
<p>在这个例子中，S 是起始符号，NP、VP、Det、N 和 V
是非终结符，"the"、"a"、"cat"、"dog"、"chased" 和 "ate"
是终结符。产生式规则定义了如何将非终结符替换为其他符号序列，从而生成语言的句子。</p>
<p>使用上下文无关文法，可以进行语言的生成和识别。生成是指从起始符号开始，根据产生式规则逐步替换，直到生成最终的终结符序列。识别是指判断一个给定的终结符序列是否符合文法规则，即是否可以从起始符号推导出该序列。</p>
<p>上下文无关文法是一种强大的形式化语言描述工具，它能够描述许多重要的编程语言和自然语言的语法结构。它在编译器设计中用于语法分析阶段，确定语言的句子是否符合语法规则。此外，上下文无关文法还被广泛应用于自然语言处理任务，如句法分析、语义分析等。</p></li>
<li><p><strong>上下文敏感文法</strong>（Context-Sensitive
Grammar，CSG）是一种形式语言的描述方法，与上下文无关文法（CFG）相比，它对生成或识别语言的能力更加强大，可以处理更复杂的语言结构。</p>
<p>与上下文无关文法不同，上下文敏感文法中的产生式规则的替换关系不仅依赖于左侧的非终结符，还依赖于上下文（即周围的符号环境）。具体来说，产生式规则中的左侧非终结符可以根据上下文中的其他符号进行替换。</p>
<p>上下文敏感文法由<strong>四个部分</strong>组成：</p>
<ol type="1">
<li>终结符（Terminals）：文法中的基本符号，表示不可再分的语言单元。</li>
<li>非终结符（Non-terminals）：文法中的符号，表示可以分解为其他符号序列的语言单元。</li>
<li>产生式规则（Production
Rules）：定义了非终结符如何被替换为终结符和/或非终结符的规则。每个产生式规则通常由一个左侧非终结符、一个箭头
"-&gt;" 和一个右侧序列组成，而右侧序列中的符号可以包含上下文。</li>
<li>起始符号（Start
Symbol）：表示语法推导开始的符号，通常是一个非终结符。</li>
</ol>
<p>上下文敏感文法的一个简单示例如下：</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>S <span class="op">-&gt;</span> aBc</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>Ba <span class="op">-&gt;</span> Bb</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Bc <span class="op">-&gt;</span> Bd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>Bd <span class="op">-&gt;</span> d</span></code></pre></div>
<p>在这个例子中，S 是起始符号，a、b、c 和 d 是终结符，B
是非终结符。产生式规则中的右侧序列中的符号可以根据上下文中的其他符号进行替换，<strong>例如产生式规则
<code>Ba -&gt; Bb</code> 只在 B 后面是 a 时才会被应用</strong>。</p>
<p>上下文敏感文法在编程语言和自然语言处理中具有重要应用。在编译器设计中，它可以用于描述更复杂的语法结构和语义规则。在自然语言处理中，上下文敏感文法可用于语法分析、语义分析和语言生成等任务，以处理更复杂的自然语言结构和含义。</p></li>
</ul>
<h4 id="编译器的编译过程">编译器的编译过程</h4>
<ul>
<li><p>编译过程<img
src="https://s2.loli.net/2023/06/24/MuqSV7UtyRgpCOL.png"
alt="image-20230624182432173" /></p>
<p>编译器是一种将高级编程语言源代码转换为机器可执行代码的软件工具。它的工作原理通常涉及以下<strong>主要阶段</strong>：</p>
<ol type="1">
<li><p>扫描器（Scanner）：也称为词法分析器（Lexical
Analyzer），将源代码分割成一个个称为令牌（Tokens）的词法单元，例如关键字、标识符、运算符等。</p></li>
<li><p>类型检查器（Type
Checker）：对令牌进行类型检查，确保变量和表达式的类型匹配，并进行语义验证。</p></li>
<li><p>解析器（Parser）：也称为语法分析器（Syntax
Analyzer），根据语法规则将令牌序列转换为一个称为抽象语法树（AST）的树形结构。AST表示源代码的语法结构。</p></li>
<li><p>代码生成器（Code
Generator）：根据AST生成中间表示（IR），其中包含与目标平台相关的抽象指令集。</p></li>
<li><p>翻译器（Translator）：将中间表示转换为目标平台特定的机器代码，即可执行的机器指令。</p></li>
</ol></li>
</ul>
<h4 id="ast-vs-ir">AST vs IR</h4>
<ul>
<li>比较<img src="https://s2.loli.net/2023/06/24/8bakLxW56cDMFf1.png"
alt="image-20230624194509279" />
<ol type="1">
<li>语法结构上AST更像高级语言</li>
<li>IR不依赖于特定的原因</li>
<li>IR更加简洁</li>
<li>IR有控制流信息</li>
</ol></li>
</ul>
<h4 id="ir-three-address-code3ac">IR: Three-Address Code(3AC)</h4>
<ul>
<li><p>真正的语义落实到IR</p></li>
<li><p>右侧最多只有一个操作符</p></li>
<li><p>三指令的含义</p></li>
<li><p>J<strong>ava字节码</strong>（Java
bytecode）是Java编程语言源代码编译后生成的<strong>中间代码</strong>，它是一种与<strong>平台无关</strong>的指令集，可以在Java虚拟机（JVM）上执行。</p>
<p>Java字节码是一种由单字节指令组成的指令序列。每个字节码指令都包含一个操作码（opcode）和零个或多个操作数。操作码表示要执行的操作类型，而操作数提供了操作所需的数据或信息。</p>
<p>Java字节码的设计目标之一是平台无关性。通过将Java源代码编译为字节码，程序可以在不同的平台上运行，只需在每个平台上安装适当的Java虚拟机。这种跨平台性使得Java成为一种流行的开发语言。</p>
<p>Java字节码的执行是由<strong>Java虚拟机</strong>负责的。JVM读取字节码指令，并根据指令的类型执行相应的操作，例如加载、存储、运算、方法调用等。通过JVM的即时编译器（Just-In-Time
Compiler，JIT）或解释器，字节码可以被动态地编译成本地机器代码，从而实现更高效的执行。</p>
<p>Java字节码也提供了一些高级特性，如异常处理、线程同步和对象操作等。这些特性通过字节码指令和特定的字节码结构来支持，使得Java程序可以在虚拟机上运行，并提供了丰富的语言特性和功能。</p>
<p>除了Java语言本身生成的字节码，其他编程语言也可以生成与Java字节码兼容的字节码，例如使用Scala语言编写的程序可以编译为Java字节码，并在JVM上执行。</p></li>
</ul>
<h4 id="ac-in-real-assignmentssa">3AC in Real Assignment(SSA)</h4>
<ul>
<li><p>Soot,<strong>示例for循环</strong><img
src="https://s2.loli.net/2023/06/25/dSOlI23wkhZ9TVe.png"
alt="image-20230625000210369" /></p></li>
<li><p>在Soot框架中，以下是与方法调用相关的几个指令：</p>
<ol type="1">
<li><p>invokespecial：该指令用于调用类的构造方法或私有方法。它会根据给定的类和方法签名，调用相应的构造方法或私有方法。在Java字节码中，invokespecial指令的操作码为<code>invokespecial</code>。</p></li>
<li><p>invokevirtual：该指令用于调用对象的实例方法。它会根据给定的类、方法签名和接收者对象，调用相应的实例方法。在Java字节码中，invokevirtual指令的操作码为<code>invokevirtual</code>。</p></li>
<li><p>invokeinterface：该指令用于调用接口的方法。它会根据给定的接口、方法签名和接收者对象，调用相应的接口方法。在Java字节码中，invokeinterface指令的操作码为<code>invokeinterface</code>。</p></li>
<li><p>invokestatic：该指令用于调用类的静态方法。它会根据给定的类和方法签名，调用相应的静态方法。在Java字节码中，invokestatic指令的操作码为<code>invokestatic</code>。</p></li>
<li><p>invokedynamic：该指令用于动态调用方法，它是Java SE
7中引入的一个新指令。与其他指令不同，invokedynamic指令的目标方法是通过一个特殊的调用点（CallSite）动态解析的，而不是在编译时确定的。在Java字节码中，invokedynamic指令的操作码为<code>invokedynamic</code>。</p></li>
</ol>
<p>这些指令在Soot框架中也可以通过API进行处理和分析。Soot提供了一系列的类和方法，使得开发者可以获取方法调用的信息、修改方法调用的目标、插入新的方法调用等，以进行代码分析和转换。</p>
<p>需要注意的是，Soot框架是一个功能强大的工具，可以在字节码级别对Java程序进行操作，但在使用时需要仔细阅读相关文档和了解具体的使用方法，以确保正确地处理方法调用和其他字节码指令。</p></li>
<li><p>方法签名（Method
Signature）是用来唯一标识一个方法的字符串表示。它包含了方法的名称、参数类型以及返回类型等信息，用于在一个类中唯一确定一个方法的特征。</p>
<p>方法签名的一般格式为：</p>
<pre><code>methodName(parameterType1, parameterType2, ..., returnType)</code></pre>
<p>其中：</p>
<ul>
<li><code>methodName</code> 是方法的名称。</li>
<li><code>parameterType1, parameterType2, ...</code>
是方法的参数类型，按照参数顺序列出，用逗号分隔。</li>
<li><code>returnType</code> 是方法的返回类型。</li>
</ul>
<p>方法签名的参数类型和返回类型通常使用Java的类型表示，如<code>int</code>、<code>String</code>、<code>Object</code>等。对于数组类型，使用<code>[]</code>表示，如<code>int[]</code>表示整型数组。对于泛型类型，使用<code>&lt;T&gt;</code>表示，其中<code>T</code>可以是任何标识符。</p>
<p>以下是几个方法签名的示例：</p>
<ul>
<li><code>void methodName()</code>：表示一个无参数、无返回值的方法。</li>
<li><code>int add(int a, int b)</code>：表示一个参数为两个整数，返回类型为整数的方法。</li>
<li><code>String getName()</code>：表示一个无参数，返回类型为字符串的方法。</li>
<li><code>boolean contains(String[] arr, String value)</code>：表示一个参数为字符串数组和字符串，返回类型为布尔值的方法。</li>
</ul>
<p>方法签名在Java中用于方法的重载和方法的查找。通过方法签名，编译器和虚拟机能够区分不同的方法，并根据调用时提供的参数类型选择合适的方法进行调用。</p>
<p>需要注意的是，方法签名仅包括方法名称、参数类型和返回类型，不包括方法的修饰符（如public、private等）和异常类型。方法的完整描述还需要考虑这些因素。</p></li>
<li><p>StringBuilder是Java中的一个可变字符串类，它允许进行高效的字符串操作，如拼接、插入、删除和替换等。StringBuilder类属于java.lang包，可以在Java程序中使用。</p>
<p>StringBuilder与Java中的String类有所不同。String类是不可变的，每次对String对象进行修改时都会创建一个新的String对象，而StringBuilder类则允许在原始对象上直接修改，避免了不必要的对象创建和内存开销。</p>
<p>以下是一些StringBuilder类常用的方法和操作：</p>
<ol type="1">
<li><p>构造方法：可以使用不同的构造方法来创建一个StringBuilder对象，例如：</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">();</span> <span class="co">// 创建一个空的StringBuilder对象</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">);</span> <span class="co">// 创建一个带有初始内容的StringBuilder对象</span></span></code></pre></div></li>
<li><p>append()：用于将字符串、字符、整数等添加到StringBuilder对象的末尾。</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">();</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">);</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot; &quot;</span><span class="op">);</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;World&quot;</span><span class="op">);</span></span></code></pre></div></li>
<li><p>insert()：用于在指定位置插入字符串、字符、整数等。</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;Hello World&quot;</span><span class="op">);</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">insert</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span> <span class="co">// 在位置5插入逗号</span></span></code></pre></div></li>
<li><p>delete()：用于删除指定位置的字符或一段字符。</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;Hello World&quot;</span><span class="op">);</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">delete</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">11</span><span class="op">);</span> <span class="co">// 删除位置5到11之间的字符</span></span></code></pre></div></li>
<li><p>replace()：用于替换指定位置的字符或一段字符。</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;Hello World&quot;</span><span class="op">);</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">replace</span><span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="st">&quot;Java&quot;</span><span class="op">);</span> <span class="co">// 替换位置6到11之间的字符为&quot;Java&quot;</span></span></code></pre></div></li>
<li><p>toString()：将StringBuilder对象转换为String对象。</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;Hello World&quot;</span><span class="op">);</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> str <span class="op">=</span> sb<span class="op">.</span><span class="fu">toString</span><span class="op">();</span></span></code></pre></div></li>
</ol>
<p>StringBuilder的方法具有链式调用的特点，可以连续对字符串进行操作，例如：</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">StringBuilder</span> sb <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">();</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>sb<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot; &quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;World&quot;</span><span class="op">);</span></span></code></pre></div>
<p>由于StringBuilder是可变的，因此在对大量字符串进行拼接或修改时，使用StringBuilder通常比直接使用String效率更高。</p>
<p>需要注意的是，由于StringBuilder是非线程安全的，如果在多线程环境中使用，应考虑使用线程安全的替代类StringBuffer。</p></li>
<li><p>方法调用的IR</p>
<ol type="1">
<li><p>调用方法<img
src="https://s2.loli.net/2023/06/25/zxtFXrnA47a8TYC.png"
alt="image-20230625003118030" /></p></li>
<li><p>主函数的IR<img
src="https://s2.loli.net/2023/06/25/4TD8zP2Q3bVcYSa.png"
alt="image-20230625003849610" /></p></li>
<li><p>类的IR</p>
<p>在Java中，<code>&lt;clinit&gt;</code>是一个特殊的静态初始化方法（static
initialization
method），它用于执行类的静态初始化代码块。<code>&lt;clinit&gt;</code>方法是由Java编译器在编译时自动合成的，用于在类加载过程中执行静态初始化操作。</p>
<p>当Java虚拟机加载一个类时，它会按需执行类的静态初始化，包括执行静态字段的初始化和静态代码块的初始化。这些初始化操作会在类首次被访问之前进行。</p>
<p>静态初始化由<code>&lt;clinit&gt;</code>方法来完成。<code>&lt;clinit&gt;</code>方法没有参数和返回值，它的方法名是固定的，无法在源代码中定义或调用。该方法会根据编译器生成的静态初始化代码块的顺序和内容来执行。</p>
<p>以下是一些关于<code>&lt;clinit&gt;</code>方法的特点和注意事项：</p>
<ul>
<li><code>&lt;clinit&gt;</code>方法是由编译器自动生成的，不需要程序员显式定义。</li>
<li><code>&lt;clinit&gt;</code>方法是线程安全的，Java虚拟机保证了它的原子性和可见性。</li>
<li><code>&lt;clinit&gt;</code>方法在类加载过程中执行，且只执行一次。即使类被多次加载，也只会执行一次。</li>
<li>如果一个类没有显式的静态初始化代码块，编译器也会为其生成一个空的<code>&lt;clinit&gt;</code>方法。</li>
</ul>
<p>静态初始化在类加载过程中是自动进行的，无需手动调用或干预。它用于执行一些静态变量的初始化操作，初始化静态代码块中的内容，并确保在类的首次访问之前完成必要的准备工作。</p>
<p>需要注意的是，<code>&lt;clinit&gt;</code>方法只用于执行静态初始化操作，与实例初始化（构造函数）无关。实例初始化是在创建对象时执行的，而静态初始化是在类加载时执行的。</p>
<p>示例代码如下所示，演示了静态初始化代码块和<code>&lt;clinit&gt;</code>方法的使用：</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MyClass <span class="op">&#123;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="op">&#123;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// 静态初始化代码块</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Static initialization block&quot;</span><span class="op">);</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">&#123;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// 主方法</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Main method&quot;</span><span class="op">);</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div>
<p>在上述代码中，静态初始化代码块在类加载时执行，<code>&lt;clinit&gt;</code>方法会在首次访问该类或调用其静态方法之前执行。当运行程序时，会首先输出"Static
initialization block"，然后输出"Main method"。<img
src="https://s2.loli.net/2023/06/25/HoQuWkiAc1ONeRY.png"
alt="image-20230625004610025" /></p></li>
</ol></li>
</ul>
<h4 id="static-single-assignmentssa">Static Single Assignment(SSA)</h4>
<ul>
<li>每个变量都是一个新的定义，供后续使用</li>
<li>引入phi function</li>
</ul>
<h4 id="basic-blocksbb">Basic Blocks(BB)</h4>
<ul>
<li>how to build BB<img
src="https://s2.loli.net/2023/06/25/NoCqH65uzZ2jdtW.png"
alt="image-20230625021236880" /></li>
</ul>
<h4 id="control-flow-graphscfg">Control Flow Graphs(CFG)</h4>
<ul>
<li>how to build CFG<img
src="https://s2.loli.net/2023/06/25/DOEmPfiRl7jWhGc.png"
alt="image-20230625021422207" /></li>
</ul>
<h3 id="data-flow-analysis-i">03（Data Flow Analysis I）</h3>
<h4 id="overview">Overview</h4>
<ul>
<li><p>"<code>May analysis</code>"和"<code>must analysis</code>"是数据流分析中的两种不同的方法。</p>
<ol type="1">
<li><p>May Analysis（可能性分析）：May
analysis通过分析程序的数据流路径来确定在某个程序点可能发生的情况。它考虑了所有可能的情况，包括可能发生的情况和可能不发生的情况。在may
analysis中，分析的结果通常是变量可能具有的值集合，但不能确定具体的取值。</p></li>
<li><p>Must Analysis（必然性分析）：Must
analysis通过分析程序的数据流路径来确定在某个程序点一定发生的情况。它只关注那些一定发生的情况，而忽略了其他可能的情况。在must
analysis中，分析的结果通常是变量一定具有的值，可以确定具体的取值。</p></li>
</ol>
<p>以活跃变量分析为例：</p>
<ul>
<li>在May
Analysis中，可能分析的结果会给出变量在某个程序点上的可能活跃状态（可能是活跃的，也可能是非活跃的），但不能确定具体是活跃还是非活跃。</li>
<li>在Must
Analysis中，必然分析的结果会给出变量在某个程序点上的确定活跃状态（一定是活跃的或一定是非活跃的），可以确定具体的活跃性。</li>
</ul>
<p>May analysis和must analysis都有各自的优势和应用场景。May
analysis可以提供更广泛的分析结果，考虑了更多可能的情况，但结果可能不够准确。Must
analysis提供了更具体和准确的分析结果，但可能会忽略某些潜在的情况。</p></li>
<li><p>different data-flow analysis applications have different
<strong>data abstraction</strong> and different <strong>flow
safe-approximation strategies</strong>, i.e., different <strong>transfer
functions</strong> and <strong>control-flow handlings</strong></p></li>
</ul>
<h4 id="preliminaries-of-data-flow-analysis">Preliminaries of Data Flow
Analysis</h4>
<ul>
<li><strong>Data-flow analysis</strong> is to find a solution to a set
of safe-approximation- directed constraints on the IN[s]’s and OUT[s]’s,
for all statements s.
<ul>
<li>constraints based on semantics of statements (transfer
functions)</li>
<li>constraints based on the flows of control</li>
</ul></li>
</ul>
<h4 id="reaching-definitions-analysis难点">Reaching Definitions
Analysis（<strong>难点</strong>）</h4>
<ul>
<li>A definition d at program point p reaches a point q if there is a
path from p to q such that d is not “killed” along that path</li>
<li>Output<img src="https://s2.loli.net/2023/07/01/byUaYHWz1X89dsx.png"
alt="image-20230701233701157" /></li>
<li>In[B]<img src="https://s2.loli.net/2023/07/01/EimzWFxCOlPY8Nq.png"
alt="image-20230701233816400" /></li>
<li>Algorithm of Reaching Definitions Analysis<img
src="https://s2.loli.net/2023/07/01/rDWaBmI2AlQFLpN.png"
alt="image-20230701233840391" /></li>
<li>算法示例<img
src="https://s2.loli.net/2023/07/01/o8EULxmDP2JVfBR.png"
alt="image-20230701233924839" /></li>
</ul>
<h4 id="live-variables-analysis">Live Variables Analysis</h4>
<ul>
<li><p>变量的定义</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode c++"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">;</span> <span class="co">// 变量声明</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">// 变量定义，为变量x分配内存并赋值为10</span></span></code></pre></div></li>
<li><p><strong>Live variables analysis</strong> tells whether the value
of variable v at program point p could be used along some path in CFG
starting at p.If so, v is live at p; otherwise, v is dead at p</p></li>
<li><p><strong>application</strong>: Information of live variables can
be used for register allocations.e.g.,</p>
<p>at some point all registers are full and we need to use one,then we
should favor using a register with a dead value</p></li>
<li><p><strong>Transfer function</strong> <img
src="https://s2.loli.net/2023/07/02/1EIri5KTfZpV9qc.png"
alt="image-20230702044318975" /></p></li>
<li><p>Algorithm<img
src="https://s2.loli.net/2023/07/02/KV8pIyF2BYQgATo.png"
alt="image-20230702044359186" /></p></li>
<li><p>Case<img src="https://s2.loli.net/2023/07/02/Qa78ioZrdsNHRuB.png"
alt="image-20230702044452886" /></p></li>
</ul>
<h4 id="available-expressions-analysis">Available Expressions
Analysis</h4>
<ul>
<li><p>in &amp; out<img
src="https://s2.loli.net/2023/07/02/deNIXWxs1vtz8G5.png"
alt="image-20230702054237193" /></p></li>
<li><p>transfer function<img
src="https://s2.loli.net/2023/07/02/aPJXOec6EqUjbsC.png"
alt="image-20230702054402967" /></p></li>
<li><p>algorithm <img
src="https://s2.loli.net/2023/07/02/MzIs1a82dD5iWbw.png"
alt="image-20230702054438299" /></p></li>
<li><p>case <img
src="https://s2.loli.net/2023/07/02/uE3nsCRZDed8xWo.png"
alt="image-20230702054531751" /></p></li>
<li><p>Analysis Comparision</p>
<figure>
<img src="https://s2.loli.net/2023/07/02/LQYnxhwv68GXfgu.png"
alt="image-20230702192230380" />
<figcaption aria-hidden="true">image-20230702192230380</figcaption>
</figure></li>
</ul>
<h3 id="data-flow-analysis---foundations">Data Flow Analysis -
Foundations</h3>
<h4 id="iterative-algorithm-another-view">Iterative Algorithm, Another
View</h4>
<ul>
<li><p>在计算理论中，一个<strong>不动点</strong>是指在某个函数或映射下保持不变的值或状态。换句话说，对于一个函数或映射，如果存在一个值使得应用该函数或映射后的结果等于该值本身，那么这个值就被称为该函数或映射的不动点。</p>
<p>数学上，不动点可以出现在各种不同的领域，包括函数、映射、算子等。在函数论中，一个函数的不动点是指函数的输入与输出相等的值。例如，对于函数
f(x) = x^2，不动点就是满足 f(x) = x^2 = x 的实数
x。在这种情况下，不动点是 0 和
1，因为它们是函数的平方操作后保持不变的值。</p>
<p>在计算机科学中，不动点理论经常用于函数式编程和程序验证。在函数式编程中，一个函数的不动点可以用来解决递归问题，通过定义一个递归函数，不动点即为递归终止的条件。在程序验证中，不动点可以用来证明程序或算法的正确性，通过证明算法或程序的输出与输入相等的情况下，它们可以作为正确的解决方案。</p></li>
<li><p><strong>3 problems</strong></p>
<ul>
<li>Is the algorithm guaranteed to terminate or reach the fixed point,
or does it always have a solution?</li>
<li>If so, is there only one solution or only one fixed point? If more
than one, is our solution the best one (most precise)?</li>
<li>When will the algorithm reach the fixed point, or when can we get
the solution?</li>
</ul></li>
</ul>
<h4 id="partial-order">Partial Order</h4>
<ul>
<li>We define poset as a pair (P, ⊑) where ⊑ is a binary relation that
defines a partial ordering over P, and ⊑ has the following properties:
<ol type="1">
<li>∀x ∈ P, x ⊑ x (Reflexivity)</li>
<li>∀x, y ∈ P, x ⊑ y ∧ y ⊑ x ⟹ x = y(Antisymmetry)</li>
<li>∀x, y, z ∈ P, x ⊑ y ∧ y ⊑ z ⟹ x ⊑ z(Transitivity)</li>
</ol></li>
<li>example<img src="https://s2.loli.net/2023/07/05/OS2Y1FNK5h9lujR.png"
alt="image-20230705022326577" /></li>
</ul>
<h4 id="upper-and-lower-bounds">Upper and Lower Bounds</h4>
<ul>
<li>最小上界</li>
<li>最大下届</li>
<li><strong>some properties</strong>
<ol type="1">
<li>Not every poset has lub or glb</li>
<li>But if a poset has lub or glb, it will be unique</li>
</ol></li>
</ul>
<h4 id="lattice-semilattice-complete-and-product-lattice">Lattice,
Semilattice, Complete and Product Lattice</h4>
<ul>
<li>Given a poset (P, ⊑), ∀a, b ∈ P, if a ⊔ b and a ⊓ b exist, then (P,
⊑) is called a <code>lattice</code></li>
<li><strong>Semilattice</strong>: Given a poset (P, ⊑), ∀a, b ∈ P, if
only a ⊔ b exists, then (P, ⊑) is called a <code>join semilattice</code>
if only a ⊓ b exists, then (P, ⊑) is called a
<code>meet semilattice</code></li>
<li>Given lattices L1= (P1, ⊑1), L2= (P2, ⊑2), …, Ln= (Pn, ⊑n), if for
all i, (Pi, ⊑i) has ⊔i(least upper bound) and ⊓i(greatest lower bound),
then we can have a <code>product lattice</code> Ln= (P, ⊑) that is
defined by: • P = P1× … × Pn • (x1, …, xn) ⊑ (y1, …, yn) ⟺ (x1⊑ y1) ∧ …
∧ (xn⊑ yn) • (x1, …, xn) ⊔ (y1, …, yn) = (x1⊔1y1, …, xn⊔nyn) • (x1, …,
xn) ⊓ (y1, …, yn) = (x1⊓1y1, …, xn⊓nyn)</li>
</ul>
<h4 id="data-flow-analysis-framework-via-lattice">Data Flow Analysis
Framework via Lattice</h4>
<ul>
<li><code>A data flow analysis framework (D, L, F)</code> consists of:
<ul>
<li>D: a direction of data flow: forwards or backwards</li>
<li>L: a lattice including domain of the values V and ameet ⊓ or join ⊔
operator</li>
<li>F: a family of transfer functions from V to V</li>
</ul></li>
</ul>
<h4 id="monotonicity-and-fixed-point-theorem">Monotonicity and Fixed
Point Theorem</h4>
<ul>
<li><strong>Monotonicity</strong> A function f: L → L (L is a lattice)
is monotonic if ∀x, y ∈ L, x ⊑ y ⟹ f(x) ⊑ f(y)</li>
<li><strong>Fixed-Point Theorem</strong> Given a complete lattice (L,
⊑), if
<ol type="1">
<li>f: L → L is monotonic and (2) L is finite, thenthe least fixed point
of f can be found by iterating f(⊥), f(f(⊥)), …, fk(⊥) until a fixed
point is reachedthe greatest fixed point of f can be found by
iterating.f( ), f(f( )), …, fk( ) until a fixed point is reached</li>
</ol></li>
</ul>
<h4 id="relate-iterative-algorithm-to-fixed-point-theorem">Relate
Iterative Algorithm to Fixed Point Theorem</h4>
<ul>
<li>Now what we have just seen is the property (fixed point theorem) for
the function on a lattice. We cannot say our iterative algorithm also
has that property unless we can relate the algorithm to the fixed point
theorem, if possible</li>
<li>k*h给出迭代算法的收敛上界的原因在于:
<ol type="1">
<li><p>k -
控制流图中的节点数。这代表着算法中需要处理的状态数量。</p></li>
<li><p>h -
格的高度,即从最小元素到最大元素的最长链长度。这代表着每个状态中可能的最大变化量。</p></li>
<li><p>对于每个节点状态,最多需要h步才能到达最终状态(每次只上升/下降1级)。</p></li>
<li><p>一共有k个节点状态需要考虑,每个节点最多需要h步。</p></li>
<li><p>如果每个节点状态的变化都是完全独立的,那么总体最多需要k*h步。</p></li>
<li><p>考虑到不同节点状态间不是完全独立的,实际收敛速度会更快,但k*h给出了一个最坏情况下的上界。</p></li>
<li><p>可以看出,这个上界源自将“状态数量”和“状态变化量”相乘,反映了问题的规模。</p></li>
</ol></li>
</ul>
<h4 id="maymust-analysis-a-lattice-view">May/Must Analysis, A Lattice
View</h4>
<ul>
<li><p>reaching
definition(可达定义)是程序分析中的一个重要概念,它描述了在程序的一个点处,哪些变量的定义可以达到或者说影响到该处。</p>
<p>举个例子:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="dt">int</span> a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fl">2.</span> <span class="dt">int</span> b <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fl">3.</span> a <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fl">4.</span> b <span class="op">=</span> a<span class="op">;</span></span></code></pre></div>
<p>在第4行,变量b的reaching
definition就是第2行对b的定义和第3行对a的定义,因为这两个定义可以影响到b在第4行的取值。</p>
<p>换句话说,reaching
definition是程序中某点可影响该点的变量定义的集合。它体现了程序各部分之间的数据流关系。</p>
<p>计算reaching definition对许多程序分析任务很重要,比如:</p>
<ul>
<li>数据流分析</li>
<li>确定变量实时值</li>
<li>确定变量引用关系</li>
<li>寻找未初始化变量等</li>
</ul></li>
<li><p><strong>Truth</strong></p></li>
<li><p>Reaching definition分析通常采用自下而上(强)的方式,主要原因有:</p>
<ol type="1">
<li>需合并来自多条路径的定义。自下而上可以直接合并不同控制流路径上的定义</li>
</ol></li>
<li><p>不动点<img
src="https://s2.loli.net/2023/07/15/lT8DcNnuPZaUqQ2.png"
alt="image-20230715102634569" /></p></li>
</ul>
<h4 id="mop-and-distributivity">MOP and Distributivity</h4>
<ul>
<li><p>MOP computes the data-flow values at the end of each path and
apply join / meet operator to these values to find their lub / glb. Some
paths may be not executable -&gt; not fully precise</p>
<p>Unbounded, and not enumerable -&gt;impractical</p></li>
<li><p>Ours (Iterative Algorithm) vs. MOP<img
src="https://s2.loli.net/2023/07/15/wlxBt6KsynFhYEO.png"
alt="image-20230715141417547" /></p>
<p>When F is distributive, i.e., F(x ⊔ y) = F(x) ⊔ F(y) MOP = Ours (Ours
is as precise as MOP)</p></li>
</ul>
<h4 id="constant-propagation">Constant Propagation</h4>
<ul>
<li><p>Given a variable x at program point p, determine whether x is
guaranteed to hold a constant value at p.</p></li>
<li><p>A data flow analysis framework (D, L, F) consists of: •D: a
direction of data flow: forwards or backwards •L: a lattice including
domain of the values V and a meet ⊓ or join ⊔ operator •F: a family of
transfer functions from V to V</p></li>
<li><p>Constant Propagation – Nondistributivity<img
src="https://s2.loli.net/2023/07/15/2J9jAS3VCPklcI4.png"
alt="image-20230715142310553" /></p></li>
</ul>
<h4 id="worklist-algorithm">Worklist Algorithm</h4>
<ul>
<li><p>code</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>OUT<span class="op">[</span>entry<span class="op">]</span> <span class="op">=</span> ∅<span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>each basic block B\entry<span class="op">)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  OUT<span class="op">[</span>B<span class="op">]</span> <span class="op">=</span> ∅<span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>Worklist ← all basic blocks</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>Worklist is <span class="kw">not</span> empty<span class="op">)</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    Pick a basic block B from Worklist</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    old_OUT <span class="op">=</span> OUT<span class="op">[</span>B<span class="op">]</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>old_OUT ≠ OUT<span class="op">[</span>B<span class="op">])</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    IN<span class="op">[</span>B<span class="op">]</span> <span class="op">=</span>⊔P a predecessor of BOUT<span class="op">[</span>P<span class="op">];</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    OUT<span class="op">[</span>B<span class="op">]</span> <span class="op">=</span> genBU <span class="op">(</span>IN<span class="op">[</span>B<span class="op">]</span> <span class="op">-</span> killB<span class="op">);</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>old_OUT ≠ OUT<span class="op">[</span>B<span class="op">])</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>      Add all successors of B to Worklist</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Forward Analysis</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">//  OUT will not change if IN does not change</span></span></code></pre></div></li>
</ul>
<h3 id="interprocedural-analysis">Interprocedural Analysis</h3>
<h4 id="motivation">Motivation</h4>
<h4 id="call-graph-construction-cha">Call Graph Construction (CHA)</h4>
<ul>
<li><p><strong>Call Graph</strong></p></li>
<li><p><strong>Call Graph Construction for OOPLs</strong> (focus on
Java)</p>
<ul>
<li>Class hierarchy analysis (CHA)</li>
<li>Rapid type analysis (RTA)</li>
<li>Variable type analysis (VTA)</li>
<li>Pointer analysis (k-CFA)</li>
</ul></li>
<li><p>在程序分析中,call
表示函数调用。根据<strong>调用方式</strong>的不同,可以分为:</p>
<ol type="1">
<li>static call</li>
</ol>
<ul>
<li>静态调用,即普通的函数调用</li>
<li>调用目标可以通过静态分析确定</li>
</ul>
<ol start="2" type="1">
<li>special call</li>
</ol>
<ul>
<li>特殊函数调用,通常是系统函数</li>
<li>调用目标固定,但行为依赖具体实现</li>
</ul>
<ol start="3" type="1">
<li>virtual call</li>
</ol>
<ul>
<li>虚函数调用</li>
<li>调用目标依赖运行时类型</li>
<li>静态分析难以确定</li>
</ul>
<ol start="4" type="1">
<li>indirect call</li>
</ol>
<ul>
<li>间接调用,通过函数指针等调用</li>
<li>调用目标无法静态确定</li>
</ul>
<p>对于前两种静态调用,较易通过<code>静态分析</code>确定目标。</p>
<p>但虚函数和间接调用会使静态分析更困难,需要<code>复杂的指针和虚函数分析</code>。</p></li>
<li><p>During run-time, a <code>virtual call</code> is resolved based
on</p>
<ol type="1">
<li>type of the receiver object (pointed by o)</li>
<li>method signature at the call site</li>
</ol></li>
<li><p>在面向对象编程的虚函数(Virtual
Function)调用中,<code>调用点方法签名</code>(Call Site Method
Signature)指的是调用虚函数的语句所在位置的方法的签名信息。</p>
<p>例如:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Base <span class="op">&#123;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">virtual</span> <span class="dt">void</span> func<span class="op">(</span><span class="dt">int</span> x<span class="op">);</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Derived <span class="op">:</span> <span class="kw">public</span> Base <span class="op">&#123;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">virtual</span> <span class="dt">void</span> func<span class="op">(</span><span class="dt">double</span> x<span class="op">);</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> foo<span class="op">(</span>Base<span class="op">*</span> b<span class="op">)</span> <span class="op">&#123;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  b<span class="op">-&gt;</span>func<span class="op">(</span><span class="dv">10</span><span class="op">);</span> <span class="co">// 调用点</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div>
<p>这里foo()方法是调用点,它的签名是:</p>
<p>void foo(Base* b)</p>
<p>这个调用点签名与Base::func(int x)匹配。</p>
<p>而Derived类中func()的签名虽然不 match,但可以被覆盖。</p>
<p>总结:</p>
<ul>
<li>调用点签名会与实际调用的虚函数签名进行匹配。</li>
<li>用于验证调用的正确性。</li>
<li>是C++虚函数分发的必要信息。</li>
<li>调用点签名的解析是程序分析的重要步骤。</li>
</ul></li>
<li><p><strong>Dispatch: An Example</strong><img
src="https://s2.loli.net/2023/07/15/nE5lBakYMXsOuqQ.png"
alt="image-20230715164234761" /></p></li>
<li><p>CHA</p></li>
<li><p><strong>Call Graph Construction: Algorithm</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>BuildCallGraph<span class="op">(</span>𝑚𝑚𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒<span class="op">)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>WL <span class="op">=</span> <span class="op">[</span>𝑚𝑚𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒𝑒<span class="op">],</span> CG <span class="op">=</span> <span class="op">&#123;&#125;,</span> RM <span class="op">=</span> <span class="op">&#123;&#125;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> WL is <span class="kw">not</span> empty <span class="cf">do</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        remove 𝑚𝑚 from WL</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> 𝑚𝑚 ∉ RM then</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            add 𝑚𝑚 to RM</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>            <span class="ex">foreach</span> call site 𝑐𝑐𝑐𝑐 in 𝑚𝑚 <span class="cf">do</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                T <span class="op">=</span> Resolve<span class="op">(</span>𝑐𝑐𝑐𝑐<span class="op">)</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                <span class="ex">foreach</span> target method 𝑚𝑚푚 in T <span class="cf">do</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>                    add 𝑐𝑐𝑐𝑐 → 𝑚𝑚′to CG</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>                    add 𝑚𝑚′to WL</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> CG</span></code></pre></div></li>
</ul>
<h4 id="interprocedural-control-flow-graph">Interprocedural Control-Flow
Graph</h4>
<ul>
<li><p>An ICFG of a program consists of CFGs of the methods in the
program, plus two kinds of additional edges:</p>
<ul>
<li>call edges</li>
<li>return edges</li>
</ul></li>
<li><p>example</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> foo<span class="op">()</span> <span class="op">&#123;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    bar<span class="op">(</span>…<span class="op">);</span>    <span class="co">// call site</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// return site</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div></li>
<li><p>ICFG: An Example<img
src="https://s2.loli.net/2023/07/19/MUgSRYcAkNtnosb.png"
alt="image-20230719165736885" /></p></li>
</ul>
<h4 id="interprocedural-data-flow-analysis">Interprocedural Data-Flow
Analysis</h4>
<ul>
<li>Interprocedural Constant Propagation: An Exampl<img
src="https://s2.loli.net/2023/07/20/ZpXc38S4NGnCAjT.png"
alt="image-20230720161955307" /></li>
</ul>
<h3 id="课程08pointer-analysis">课程08（Pointer Analysis）</h3>
<h5 id="motivation-1">Motivation</h5>
<ul>
<li>对象、变量的指向关系：
<ul>
<li>A fundamental static analysis • Computes which memory locations a
pointer can point to</li>
</ul></li>
<li>may-analysis</li>
</ul>
<h5 id="introduction-to-pointer-analysis">Introduction to Pointer
Analysis</h5>
<ul>
<li><p>Two closely related but different concepts</p>
<ul>
<li>Pointer analysis: which objects a pointer can point to?</li>
<li><strong>Alias analysis</strong>: can two pointers point to the same
object</li>
</ul></li>
<li><p>Applications of Pointer Analysis</p>
<ul>
<li>Fundamental information</li>
<li>Call graph, aliases, …</li>
<li>Compiler optimization
<ul>
<li>Virtual call inlining, …</li>
</ul></li>
<li>Bug detection
<ul>
<li>Null pointer detection, …</li>
</ul></li>
<li><strong>Security analysis</strong>
<ul>
<li>Information flow analysis, …</li>
</ul></li>
<li>And many more …</li>
</ul></li>
</ul>
<h5 id="key-factors-of-pointer-analysis">Key Factors of Pointer
Analysis</h5>
<ul>
<li><p><strong>Heap abstraction</strong>：Allocation-Site
Abstraction</p>
<p>• Model concrete objects by their allocation sites • One abstract
object per allocation site to represent all its allocated concrete
objects</p></li>
<li><p><strong>Context Sensitivity</strong><img
src="https://s2.loli.net/2023/07/22/rPMJ2ump9Nf4Z3F.png"
alt="image-20230722113922836" /></p></li>
<li><p>Flow Sensitivity<img
src="https://s2.loli.net/2023/07/22/3DbV9TlimXGPoYE.png"
alt="image-20230722114043428" /></p></li>
<li><p><strong>Analysis Scope</strong>：whole program</p>
<ul>
<li>demand driven<img
src="https://s2.loli.net/2023/07/22/fvxnN2H1LjKtTuP.png"
alt="image-20230722114209116" /></li>
</ul></li>
<li><p><strong>Pointer Analysis in This Course</strong><img
src="https://s2.loli.net/2023/07/22/stNV7AHv4mfJnOa.png"
alt="image-20230722114251220" /></p></li>
</ul>
<h5 id="concerned-statements">Concerned Statements</h5>
<ul>
<li><p>We only focus on <strong>pointer-affecting
statements</strong></p></li>
<li><p>Pointers in Java • Local variable: x • Static field: C.f •
Instance field: x.f • Array element: array[i]</p></li>
<li><p>Statements:</p>
<p>Newx = new T() Assignx = y Storex.f = y Loady = x.f Callr = x.k(a,
…)</p></li>
</ul>
<h3 id="pointer-analysis-foundations-i">Pointer Analysis Foundations
(I)</h3>
<h4 id="pointer-analysis-rules">Pointer Analysis: Rules</h4>
<p><img src="https://s2.loli.net/2023/07/22/4UlsTb12JHZntIg.png"
alt="image-20230722120311816" /><img
src="https://s2.loli.net/2023/07/22/Nak3DoEmzdq4rvg.png"
alt="image-20230722120346628" /></p>
<h4 id="how-to-implement-pointer-analysis">How to Implement Pointer
Analysis</h4>
<ul>
<li>Essentially, pointer analysis is to propagate points-to information
among pointers (variables &amp; fields）</li>
<li>Key to implementation: when 𝑝𝑝𝑝𝑝 𝑥𝑥 is changed, propagate the
changed part to the related pointers of 𝑥</li>
<li>Pointer flow graph of a program is a directed graph that expresses
how <strong>objects</strong> flow among the pointers in the
program.</li>
<li><strong>Pointer Flow Graph: An Example</strong><img
src="https://s2.loli.net/2023/07/22/EznYUa6xrqohvDN.png"
alt="image-20230722172937284" /></li>
</ul>
<h4 id="pointer-analysis-algorithms">Pointer Analysis: Algorithms</h4>
<ul>
<li><figure>
<img src="https://s2.loli.net/2023/07/22/ut5gwhBP78sc6KH.png"
alt="image-20230722173009462" />
<figcaption aria-hidden="true">image-20230722173009462</figcaption>
</figure></li>
<li>Algorithm <img
src="https://s2.loli.net/2023/07/22/YwCpfhmAy5W1BlG.png"
alt="image-20230722173041615" /></li>
<li>An Example<img
src="https://s2.loli.net/2023/07/22/aGgSdCUJcp36FyT.png"
alt="image-20230722173216515" /></li>
</ul>
<h4 id="pointer-analysis-with-method-calls">Pointer Analysis with Method
Calls</h4>
<ul>
<li><p><strong>Rule: Call</strong><img
src="https://s2.loli.net/2023/07/27/FgnVXbOh2UiEruf.png"
alt="image-20230727052238933" /></p></li>
<li><p>Algorithms<img
src="https://s2.loli.net/2023/07/27/txqfvPHZNuEwYGI.png"
alt="image-20230727052357102" /></p>
<ol type="1">
<li><figure>
<img src="https://s2.loli.net/2023/07/27/5swaNHtri3LAuMq.png"
alt="image-20230727053003917" />
<figcaption aria-hidden="true">image-20230727053003917</figcaption>
</figure></li>
<li><figure>
<img src="https://s2.loli.net/2023/07/27/ZmaNXS2sz8vypbL.png"
alt="image-20230727053202988" />
<figcaption aria-hidden="true">image-20230727053202988</figcaption>
</figure></li>
<li><figure>
<img src="https://s2.loli.net/2023/07/27/coANI7Z2shEiVQb.png"
alt="image-20230727053336324" />
<figcaption aria-hidden="true">image-20230727053336324</figcaption>
</figure></li>
</ol></li>
</ul>
<h3 id="pointer-analysis--context-sensitivity-i">Pointer Analysis
-Context Sensitivity (I)</h3>
<ul>
<li>上下文不敏感<img
src="https://s2.loli.net/2023/07/27/4cFf6pgPHy2AWXx.png"
alt="image-20230727183228700" /></li>
<li>上下文敏感<img
src="https://s2.loli.net/2023/07/27/3dLweaYzMAksvDy.png"
alt="image-20230727183254793" /></li>
</ul>
<h4 id="introduction-1">Introduction</h4>
<ul>
<li>Context-Sensitive Heap<img
src="https://s2.loli.net/2023/07/27/ZslbqKt8ERFuQie.png"
alt="image-20230727183617906" /></li>
</ul>
<h4 id="context-sensitive-pointer-analysis-rules">Context Sensitive
Pointer Analysis: Rules</h4>
<ul>
<li><p>Domain and Notations<img
src="https://s2.loli.net/2023/07/27/nI4EFhyucqCbtHl.png"
alt="image-20230727183659101" /></p></li>
<li><p>rule<img src="https://s2.loli.net/2023/07/27/P4Ru8zfplN6KEYh.png"
alt="image-20230727183717458" /></p>
<figure>
<img src="https://s2.loli.net/2023/07/27/3Q8uAqTO6Dg21Zy.png"
alt="xx" />
<figcaption aria-hidden="true">xx</figcaption>
</figure>
<figure>
<img src="https://s2.loli.net/2023/07/27/nfTuGOqkeSrWDot.png"
alt="image-20230727183808376" />
<figcaption aria-hidden="true">image-20230727183808376</figcaption>
</figure></li>
</ul>
<h4 id="context-sensitive-pointer-analysis-algorithms">Context Sensitive
Pointer Analysis: Algorithms</h4>
<ul>
<li><strong>Nodes</strong>: CSPointer = (C × V) ⋃ (C × O × F) A node n
represents a context-sensitive variable or a field of a
context-sensitive abstract object With C.S., the nodes (pointers) are
qualified by contexts</li>
<li><strong>Edges</strong>: CSPointer × CSPointer An edge 𝑥𝑥 → 𝑦𝑦 means
that the objects pointed by pointer 𝑥𝑥 may flow to (and also be pointed
to by) pointer 𝑦𝑦 e.g., edge 𝑐𝑐: 𝑎𝑎 → 𝑐𝑐′: 𝑏𝑏 means that objects in 𝑝𝑝𝑝𝑝
𝑐𝑐: 𝑎𝑎 may flow to 𝑝𝑝𝑝𝑝 𝑐𝑐′: 𝑏</li>
<li><strong>C.S. Pointer Analysis: Algorithm</strong><img
src="https://s2.loli.net/2023/07/29/salJLxpgj5ik8Wd.png"
alt="image-20230729000218650" /></li>
</ul>
<h4 id="context-sensitivity-variants">Context Sensitivity Variants</h4>
<ul>
<li>类型
<ul>
<li>Call-site sensitivity</li>
<li>Object sensitivity</li>
<li>Type sensitivity</li>
</ul></li>
<li><strong>select()</strong><img
src="https://s2.loli.net/2023/07/29/yrkqm5gWdRDtNiU.png"
alt="image-20230729021744245" /></li>
<li><strong>Call-Site Sensitivity</strong>: Example<img
src="https://s2.loli.net/2023/07/29/ZwYaH1zC8E5sFy6.png" /></li>
<li><strong>k-Limiting Context Abstraction</strong>
<ul>
<li>Motivation
<ul>
<li>Ensure termination of pointer analysis</li>
<li>Avoid too many contexts (long call chains) in real-world programs
blow up the pointer analysis</li>
</ul></li>
<li>Approach: set an upper bound for length of contexts, denoted by k
<ul>
<li>For call-site sensitivity, each context consists of the last k call
sites of the call chains</li>
<li>In practice, k is a small number (usually ≤3)</li>
<li>Method contexts and heap contexts may use different k • e.g., k=2
for method contexts, k=1 for heap contexts</li>
</ul></li>
</ul></li>
<li><strong>k-Call-Site Sensitivity/k-CFA</strong><img
src="https://s2.loli.net/2023/07/29/p8TJZB4uUOib9GN.png"
alt="image-20230729002307516" /></li>
<li><strong>Call-Site vs. Object Sensitivity</strong>: example<img
src="https://s2.loli.net/2023/07/29/1rSDsihvBwaVdk9.png"
alt="image-20230729003042085" /></li>
<li><strong>C.S.(1-Object) vs C.S.(1-call-site)</strong><img
src="https://s2.loli.net/2023/07/29/aiAB7CZbGlUnDg2.png"
alt="image-20230729003257596" />
<ul>
<li>In theory, their precision is incomparable</li>
<li>In practice, object sensitivity generally outperforms call-site
sensitivity for OO languages (like Java)</li>
</ul></li>
<li><strong>Type Sensitivity</strong>
<ul>
<li>At a method call, use the type containing the allocation site of the
receiver object with its heap context as callee context</li>
<li>A coarser abstraction over object sensitivity</li>
<li>Under the same k-limiting, the precision of type sensitivity is
<strong>no better than</strong> object sensitivity<img
src="https://s2.loli.net/2023/07/29/ca7WNB6nvMwALRU.png"
alt="image-20230729003841836" /></li>
</ul></li>
</ul>
<h3 id="static-analysis-for-security">Static Analysis for Security</h3>
<h4 id="information-flow-security">Information Flow Security</h4>
<h4 id="confidentiality-and-integrity">Confidentiality and
Integrity</h4>
<ul>
<li>Requires the information of high variables have no effect on (i.e.,
should not interfere with) the information of low variables<img
src="https://s2.loli.net/2023/07/29/FykDmCJVPZ9vpBt.png"
alt="image-20230729021952720" /></li>
<li>机密性和完整性<img
src="https://s2.loli.net/2023/07/29/4EGbqDfamzUMk1i.png"
alt="image-20230729022051611" /></li>
</ul>
<h4 id="explicit-flows-and-covert-channels">Explicit Flows and Covert
Channels</h4>
<ul>
<li>Implicit Flows</li>
<li><strong>Covert/Hidden Channels</strong><img
src="https://s2.loli.net/2023/07/29/xopda1Gk65P3Zsw.png"
alt="image-20230729022329346" />
<ul>
<li>Mechanisms for signalling information through a computing system are
known as channels.</li>
<li>Channels that exploit a mechanism whose primary purpose is not
information transfer are called covert channels*.</li>
</ul></li>
<li><strong>Explicit Flows and Covert Channels</strong><img
src="https://s2.loli.net/2023/07/29/BMv5hVG9ONIr1px.png"
alt="image-20230729022412090" /></li>
</ul>
<h4 id="taint-analysis">Taint Analysis</h4>
<ul>
<li><p>Taint analysis is the most common information flow analysis. It
classifies program data into two kinds: • Data of interest, some kinds
of labels are associated with the data, called tainted data • Other
data, called untainted data</p></li>
<li><p>sources and sinks<img
src="https://s2.loli.net/2023/07/29/AvNusBqtDH9XkJV.png"
alt="image-20230729022520456" /><img
src="https://s2.loli.net/2023/07/29/D82oFzmI3Y5Ev7s.png" /></p></li>
<li><p><strong>Taint and Pointer Analysis, Together</strong></p>
<p>• Treats tainted data as (artificial) objects • Treats sources as
allocation sites (of tainted data) • Leverages pointer analysis to
propagate tainted data</p></li>
<li><p><strong>Domains and Notations</strong><img
src="https://s2.loli.net/2023/07/29/q6H5Gd82fAyhNel.png"
alt="image-20230729022740672" /></p></li>
<li><p><strong>Inputs &amp; Outputs</strong><img
src="https://s2.loli.net/2023/07/29/1GJ5dnTDzKqltV9.png"
alt="image-20230729022832479" /></p></li>
<li><p><strong>Rules: Call</strong><img
src="https://s2.loli.net/2023/07/29/d5GbeICAfT2pN6g.png"
alt="image-20230729022905625" /></p></li>
<li><p>Taint Analysis: An Example<img
src="https://s2.loli.net/2023/07/29/7eWGmzOjotEQ6sJ.png"
alt="image-20230729022959191" /></p></li>
</ul>
<p>paper:Implicit Flows: Can't Live With Em, Can't Live Without Em</p>
<h3 id="datalog-based-program-analysis">Datalog-Based Program
analysis</h3>
<h4 id="motivation-2">Motivation</h4>
<ul>
<li>Declarative: what to do (~specification)</li>
</ul>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Persons <span class="kw">WHERE</span> Age <span class="op">&gt;=</span> <span class="dv">18</span>;</span></code></pre></div>
<h4 id="introduction-to-datalog">Introduction to Datalog</h4>
<ul>
<li><p><strong>Datalog</strong></p>
<p>Datalog is a declarative logic programming language that is a subset
of Prolog. • It emerged as a database language (mid-1980s)* • Now it has
a variety of applications</p>
<ul>
<li>Program analysis</li>
<li>Declarative networking</li>
<li>Big data</li>
<li>Cloud computing</li>
<li>…</li>
</ul></li>
<li><p><code>Datalog = Data + Logic</code></p></li>
<li><p><strong>Predicates</strong> (Data)</p>
<p>• In Datalog, a predicate (relation) is a set of statements •
Essentially, a predicate is a table of data</p></li>
<li><p>A <strong>fact</strong> asserts that a particular tuple (a row)
belongs to a relation (a table), i.e., it represents a predicate being
true for a particular combination of values</p></li>
<li><p>Atoms</p>
<ul>
<li>Atoms are basic elements of Datalog, which represent predicates of
the form</li>
<li>Examples • Age(person,age) • Age(“Xiaoming”,18)</li>
<li><code>P(X1,X2,…,Xn)</code> is called relational atom</li>
<li><code>P(X1,X2,…,Xn)</code> evaluates to true when predicate P：
contains the tuple described by X1,X2,…,Xn</li>
</ul></li>
<li><p>Interpretation of Datalog Rules</p>
<pre><code>H(X1,X2) &lt;- B1(X1,X3),B2(X2,X4),…,Bn(Xm).</code></pre>
<p>• Consider all possible combinations of values of the variables in
the subgoals • If a combination makes all subgoals true, then the head
atom (with corresponding values) is also true • The head predicate
consists of all true atoms</p></li>
<li><figure>
<img src="https://s2.loli.net/2023/07/29/OKah1PNQykJrtgj.png"
alt="image-20230729164804342" />
<figcaption aria-hidden="true">image-20230729164804342</figcaption>
</figure></li>
<li><p>EDB and IDB Predicates</p>
<ol type="1">
<li>EDB (extensional database) • The predicates that are defined in a
priori • Relations are immutable • Can be seen as input relations</li>
<li>IDB (intensional database) • The predicates that are established
only by rules • Relations are inferred by rules • Can be seen as output
relations</li>
<li>• H can only be IDB • Bi can be EDB or IDB</li>
</ol></li>
<li><p>Rule Safety</p>
<pre><code>A(x) &lt;- B(y), x &gt; y.

A(x) &lt;- B(y), !C(x,y).</code></pre>
<p>• A rule is safe if every variable appears in at least one
non-negated relational atom • Above two rules are unsafe • In Datalog,
only safe rules are allowed</p></li>
<li><p>In Datalog, recursion and negation of an atom must be separated.
Otherwise, the rules may contain contradiction and the inference fails
to converge.</p>
<pre><code>A(x) &lt;- B(x), !A(x).</code></pre></li>
<li><p>Execution of Datalog Programs</p>
<p>• Monotonicity: Datalog is monotone as facts cannot be deleted •
Termination: A Datalog program always terminates as</p>
<ol type="1">
<li>Datalog is monotone</li>
<li>Possible values of IDB predicates are finite (rule safety)</li>
</ol></li>
</ul>
<h4 id="pointer-analysis-via-datalog">Pointer Analysis via Datalog</h4>
<ul>
<li>Datalog Model for Pointer Analysis<img
src="https://s2.loli.net/2023/07/29/HM1AGfdE9tLrxg7.png"
alt="image-20230729165538812" /></li>
<li>an example<img
src="https://s2.loli.net/2023/07/29/bfEwdp16yDLBqlc.png"
alt="image-20230729165558134" /></li>
<li>Datalog Rules for Pointer Analysis<img
src="https://s2.loli.net/2023/07/29/XZm6jY4MRfwscIb.png"
alt="image-20230729165644480" /></li>
<li>an example<img
src="https://s2.loli.net/2023/07/29/VuKt3UE9gY5kOdL.png"
alt="image-20230729165719982" /></li>
<li>Handle Method Calls<img
src="https://s2.loli.net/2023/07/29/EWsOYwyXTGaHuvn.png"
alt="image-20230729165802327" /></li>
<li>Whole-Program Pointer Analysis<img
src="https://s2.loli.net/2023/07/29/cUI6ZdbxmgAN2rn.png"
alt="image-20230729165819342" /></li>
</ul>
<h4 id="taint-analysis-via-datalog">Taint Analysis via Datalog</h4>
<ul>
<li><p>Datalog Model for Taint Analysis</p>
<p>On top of pointer analysis • EDB predicates • Source(m: M) // source
methods • Sink(m: M, i: N) // sink methods • Taint(l: S, t: T) //
associates each call site to the tainted data from the call site • IDB
predicate • TaintFlow(sr: S, sn: S, i: N) // detected taint flows, e.g.,
TaintFlow(𝑝𝑝𝑟𝑟,𝑝𝑝𝑛𝑛,𝑖𝑖) denotes that tainted data from source call 𝑝𝑝𝑟𝑟
may flow to 𝑖𝑖-th argument of sink call 𝑝𝑝𝑛</p></li>
<li><p>rules<img
src="https://s2.loli.net/2023/07/29/i4VSWxm5Y9GtEDd.png"
alt="image-20230729165926396" /></p></li>
</ul>
<h3 id="cfl-reachability-and-ifds">CFL-Reachability and IFDS</h3>
<h4 id="feasible-and-realizable-paths">Feasible and Realizable
Paths</h4>
<ol type="1">
<li><strong>Infeasible Paths</strong>: Paths in CFG that do not
correspond to actual executions</li>
<li>example:
<ol type="1">
<li>call site和返回值需要匹配<img
src="https://s2.loli.net/2023/08/02/nYbGrt4hApameXC.png"
alt="image-20230802183109374" /></li>
</ol></li>
<li>R<strong>ealizable Paths</strong>: The paths in which “returns” are
matched with corresponding “calls”
<ul>
<li>"Realizable paths"
是指那些在程序执行中可能实际发生的路径，其中所有的函数调用和返回都是正确匹配的。这些路径在代码中是合法的，可以被实际执行。</li>
<li>"Unrealizable paths"
是指那些在程序执行中不可能实际发生的路径，其中存在一些函数调用没有对应的返回操作，或者存在一些返回操作没有对应的函数调用。这些路径在代码中是非法的，不能被实际执行。</li>
</ul></li>
</ol>
<h4 id="cfl-reachabilityimage-20230802183533035">CFL-Reachability<img
src="https://s2.loli.net/2023/08/02/bGZupA2z6cmsrLH.png"
alt="image-20230802183533035" /></h4>
<h4 id="overview-of-ifds">Overview of IFDS</h4>
<ol type="1">
<li><strong>IFDS</strong> (Interprocedural, Finite, Distributive, Subset
Problem):
<ol type="1">
<li>IFDS is for interprocedural data flow analysis with
<strong>distributive</strong> flow functions over
<strong>finite</strong> domains.</li>
<li>Provide meet-over-all-realizable-paths (<strong>MRP</strong>)
solution</li>
</ol></li>
</ol>
<h4 id="supergraph-and-flow-functions">Supergraph and Flow
Functions</h4>
<ol type="1">
<li><p><img
src="https://s2.loli.net/2023/08/02/GrwdbHN8Svz6ga4.png" /></p></li>
<li><p><strong>Supergraph</strong></p>
<ol type="1">
<li>In IFDS, a program is represented by G* = (N<em>, E</em>) called a
supergraph. •G* consists of a collection of flow graphs G1, G2,… (one
for each procedure) •Each flowgraph Gphas a unique start node sp, and a
unique exit node ep</li>
<li>G* has three edges for each procedure call: •An intraprocedural
call-to-return-site edge from Callpto Retp •An interprocedural
call-to-start edge from Callpto spof the called procedure •An
interprocedural exit-to-return-site edge from ep of the called procedure
to Retp</li>
<li>“Possibly-uninitialized variables”: for each node n ∈ N*, determine
the set of variables that may be uninitialized before execution reaches
n.</li>
<li><figure>
<img src="https://s2.loli.net/2023/08/02/mIYkOBZGodM5JpT.png"
alt="image-20230802184353188" />
<figcaption aria-hidden="true">image-20230802184353188</figcaption>
</figure></li>
</ol></li>
<li><p><strong>Build Exploded Supergraph</strong></p>
<p>• Build exploded supergraph G#for a program by transforming flow
functions to representation relations (graphs) • Each flow function can
be represented as a graph with 2(D+1) nodes (at most (D+1)2edges), where
D is a finite set of dataflow facts</p>
<ol type="1">
<li><figure>
<img src="https://s2.loli.net/2023/08/02/Dw1uZqnK8MPg3sS.png"
alt="image-20230802184705953" />
<figcaption aria-hidden="true">image-20230802184705953</figcaption>
</figure></li>
<li>So We Need the “Glue Edge” <code>0 ⟶ 0</code>!<img
src="https://s2.loli.net/2023/08/02/rfhUMW6ZauTpKqF.png"
alt="image-20230802184821097" /></li>
</ol></li>
</ol>
<h4 id="exploded-supergraph-and-tabulation-algorithm">Exploded
Supergraph and Tabulation Algorithm</h4>
<ol type="1">
<li><figure>
<img src="https://s2.loli.net/2023/08/02/MYLDIrSZ6BnW3GK.png"
alt="image-20230802184930312" />
<figcaption aria-hidden="true">image-20230802184930312</figcaption>
</figure></li>
<li>Given an exploded supergraph G#, Tabulation algorithm determines the
MRP solution by finding out all realizable paths starting from
&lt;smain, 0&gt;</li>
<li>Tabulation Algorithm<img
src="https://s2.loli.net/2023/08/02/mOTwyYAtkV1qe4F.png"
alt="image-20230802185054340" /></li>
</ol>
<h4 id="understanding-the-distributivity-of-ifds">Understanding the
Distributivity of IFDS</h4>
<p>1.<img src="https://s2.loli.net/2023/08/02/pAUYZjvEnX4t5VN.png"
alt="image-20230802185237347" /></p>
<ol start="2" type="1">
<li><code>z = x + y</code>
<ol type="1">
<li>Given a statement S, besides S itself, if we need to consider
<strong>multiple input</strong> data facts to create correct outputs,
then the analysis is not distributive and should <strong>not</strong> be
expressed in IFDS.
<ol type="1">
<li>In IFDS, each data fact (circle) and its propagation (edges) could
be handled <strong>independently</strong>, and doing so will not affect
the correctness of the final results.</li>
</ol></li>
</ol></li>
<li><strong>Pointer Analysis</strong><img
src="https://s2.loli.net/2023/08/03/B8CJ5GXKj3NDFcY.png"
alt="image-20230803002227400" />
<ol type="1">
<li>z and y.f should have pointed to object [new T]. However, flow
function’s input data facts lack of the alias information, alias(x,y),
alias(x.f,y.f), and we need alias information to produce correct
outputs.</li>
</ol></li>
</ol>
<h3 id="soundiness">Soundiness</h3>
<h4 id="soundness-and-soundiness">Soundness and Soundiness</h4>
<ol type="1">
<li><strong>Soundness:</strong> Conservative approximation: the analysis
captures all program behaviors,or the analysis result models all
possible executions of the program</li>
<li><strong>Hard Language Features</strong> for Static Analysis：
<ol type="1">
<li>• Java Reflection, native code, dynamic class loading, etc.</li>
<li>• JavaScript eval, document object model (DOM), etc.</li>
<li>• C/C++ Pointer arithmetic, function pointers, etc</li>
</ol></li>
<li>Hard-to-analyze features: an aggressively conservative treatment to
these features will likely make the analysis too imprecise to scale,
rendering the analysis useless</li>
<li><strong>As a Result</strong>：
<ol type="1">
<li>Generally, a claimed sound static analysis has a sound core in its
implementation, i.e., most language features are over-approximated while
some specific and/or hard ones are under-approximated</li>
<li>•Not handling certain hard language features properly, e.g., Java
reflection, may have a profound impact on analysis results</li>
<li>•Treatments to hard language features are usually omitted or only
mentioned in an off-hand manner in some impl/eval parts in papers</li>
</ol></li>
<li>Then claiming soundness in papers may <strong>mislead
readers</strong>:
<ol type="1">
<li>•For <strong>non-experts</strong>, they may erroneously conclude
that the analysis is sound and confidently rely on the analysis
results</li>
<li>•For <strong>experts</strong>, it is still hard for them to
interpret the analysis results (how sound, fast, precise is the
analysis) without a clear explanation about how they treat those
important and hard language features</li>
</ol></li>
<li>Soundness, Soundiness and Unsoundness
<ol type="1">
<li>A soundy analysis aims to capture all dynamic behaviors with certain
hard language features unsoundly handled within reason</li>
<li>• A sound analysis requires to capture all dynamic behaviors</li>
<li>• An unsound analysis deliberately ignores certain behaviors in its
design for better efficiency, precision or accessibility</li>
</ol></li>
</ol>
<h4 id="hard-language-feature-java-reflection">Hard Language Feature:
Java Reflection</h4>
<ol type="1">
<li><figure>
<img src="https://s2.loli.net/2023/08/03/nFaspoDzMdj3YCB.png"
alt="image-20230803023759372" />
<figcaption aria-hidden="true">image-20230803023759372</figcaption>
</figure></li>
<li>Why We Need to Analyze Java Reflection<img
src="https://s2.loli.net/2023/08/03/8FvjY4HLDe3aXRi.png"
alt="image-20230803023852394" /></li>
<li>How to Analyze Java Reflection?<img
src="https://s2.loli.net/2023/08/03/gwTsfuZx3AJCr7X.png"
alt="image-20230803024000567" />
<ol type="1">
<li>When string arguments cannot be resolved statically,infer the
reflective targets at their usage points!
<ol type="1">
<li>String Constant analysis + Pointer Analysis</li>
<li>Type Inference + String analysis + Pointer Analysis</li>
</ol></li>
</ol></li>
</ol>
<h4 id="hard-language-feature-native-code">Hard Language Feature: Native
Code</h4>
<ol type="1">
<li>What Happens When Print in Java?<img
src="https://s2.loli.net/2023/08/03/eTuoiAYSUyfO1Db.png"
alt="image-20230803024312060" /></li>
<li>Java Native Interface (JNI)<img
src="https://s2.loli.net/2023/08/03/xuKSeCqUGMdh1jp.png"
alt="image-20230803024329860" /></li>
<li>Why Native Code is Hard to Analyze?<img
src="https://s2.loli.net/2023/08/03/fok4OG59zNjiUVS.png"
alt="image-20230803024753784" /></li>
<li>Native Code Modeling (Example)<img
src="https://s2.loli.net/2023/08/03/Qz5pUsOIkLWrTef.png"
alt="image-20230803024830163" /></li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Jf71o0x1o1l</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://Jf710001011.github.io/2023/12/09/static-program-analysis/">https://Jf710001011.github.io/2023/12/09/static-program-analysis/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Jf71o0x1o1l</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Static-Analysis/">
                                    <span class="chip bg-color">Static-Analysis</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'U2qj9LBn7UhJFyVyb1bYDa9w-gzGzoHsz',
        appKey: 'Tg6wRvRlIfODtULeHu4P96zh',
        notify: 'true' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'en',
        placeholder: 'just go go'
    });
</script>

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2023/12/09/tabby-fen-xi/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="Project:Tabby">
                        
                        <span class="card-title">Project:Tabby</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            TABBY is a Java Code Analysis Tool based on Soot .It can parse JAR/WAR/CLASS files to CPG (Code Property Graph) based on Neo4j .
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-12-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Project/" class="post-category">
                                    Project
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/12/09/static-analysis-ii/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="Static Analysis II">
                        
                        <span class="card-title">Static Analysis II</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Crypto
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-12-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Static-Analysis/" class="post-category">
                                    Static Analysis
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                    <a href="/tags/Programming-Design/">
                        <span class="chip bg-color">Programming Design</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




                            <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023</span>
            
            <span id="year">2023</span>
            <a href="/about" target="_blank">Jf71o0x1o1l</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">235.4k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2023";
                    var startMonth = "2";
                    var startDate = "16";
                    var startHour = "24";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
            <span id="icp"><img src="/medias/icp.png" style="vertical-align: text-bottom;" />
                <a href="/null" target="_blank">津ICP备Jf710001011号</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Jf710001011" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:lhhyp2333@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


                                <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

                                    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


                                        <script
                                            src="/libs/materialize/materialize.min.js"></script>
                                        <script
                                            src="/libs/masonry/masonry.pkgd.min.js"></script>
                                        <script
                                            src="/libs/aos/aos.js"></script>
                                        <script
                                            src="/libs/scrollprogress/scrollProgress.min.js"></script>
                                        <script
                                            src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
                                        <script
                                            src="/js/matery.js"></script>

                                        <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

                                            <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

                                                
                                                    <script
                                                        src="/libs/others/clicklove.js"
                                                        async="async"></script>
                                                    
                                                        
                                                            <script async
                                                                src="/libs/others/busuanzi.pure.mini.js"></script>
                                                            

                                                                

                                                                        

                                                                                
                                                                                        
                                                                                            <script
                                                                                                type="text/javascript"
                                                                                                color="0,0,255"
                                                                                                pointColor="0,0,255"
                                                                                                opacity='0.7'
                                                                                                zIndex="-1"
                                                                                                count="99"
                                                                                                src="/libs/background/canvas-nest.js"></script>
                                                                                            

                                                                                                

                                                                                                            
                                                                                                                <script
                                                                                                                    type="text/javascript"
                                                                                                                    src="/libs/background/ribbon-dynamic.js"
                                                                                                                    async="async"></script>
                                                                                                                

                                                                                                                    
                                                                                                                        <script
                                                                                                                            src="/libs/instantpage/instantpage.js"
                                                                                                                            type="module"></script>
                                                                                                                        
                                                                                                                            <script
                                                                                                                                type="text/javascript">
                                                                                                                                    //只在桌面版网页启用特效
                                                                                                                                    var windowWidth = $(window).width();
                                                                                                                                    if (windowWidth > 768) {
                                                                                                                                        document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
                                                                                                                                    }
                                                                                                                                </script>
                </body>

</html>